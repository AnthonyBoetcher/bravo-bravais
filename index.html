<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bravais Lattice Visualization</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0f0; /* Set background color */
        }
        #container {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
<div id="container"></div>
<!-- Correct paths and file extensions -->
<script src="three.js"></script>
<script src="OrbitControls.js"></script>
<script>
    // Set up scene, camera, and renderer
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true; // Enable shadows
    document.getElementById('container').appendChild(renderer.domElement);

    // Create a simple cubic lattice with shadows
    const latticeSize = 5;
    const latticeSpacing = 2;
    for (let x = 0; x < latticeSize; x++) {
        for (let y = 0; y < latticeSize; y++) {
            for (let z = 0; z < latticeSize; z++) {
                const geometry = new THREE.SphereGeometry(0.1, 32, 32);
                const material = new THREE.MeshStandardMaterial({ color: 0xff0000 }); // Use MeshStandardMaterial for shadows
                const atom = new THREE.Mesh(geometry, material);
                atom.position.set(x * latticeSpacing, y * latticeSpacing, z * latticeSpacing);
                atom.castShadow = true; // Enable casting shadows
                atom.receiveShadow = true; // Enable receiving shadows
                scene.add(atom);
            }
        }
    }

    // Set camera position
    camera.position.z = 5;

    // Add ambient light to the scene
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Soft white light
    scene.add(ambientLight);

    // Add directional light for shadows
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5); // White light
    directionalLight.position.set(10, 10, 10);
    directionalLight.castShadow = true; // Enable casting shadows
    scene.add(directionalLight);

    // Configure shadow properties for the directional light
    directionalLight.shadow.mapSize.width = 1024; // Width of the shadow map
    directionalLight.shadow.mapSize.height = 1024; // Height of the shadow map
    directionalLight.shadow.camera.near = 0.5; // Near shadow camera distance
    directionalLight.shadow.camera.far = 50; // Far shadow camera distance

    // Add orbit controls for rotation
    const controls = new THREE.OrbitControls(camera, renderer.domElement);

    // Define render function
    function animate() {
        requestAnimationFrame(animate);
        controls.update(); // Update controls
        renderer.render(scene, camera);
    }

    // Call render function
    animate();
</script>
</body>
</html>
